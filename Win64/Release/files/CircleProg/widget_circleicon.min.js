"use strict";!function(t){function i(t){this.init(t)}i.prototype={icon:"",title:"title",caption:"caption",bgcolor:"#eee",fill:!1,thik:5,tfontsize:35,cfontsize:15,tfntname:"tahoma",cfntname:"arial",tfntcolor:"#556b2f",cfntcolor:"#eee",tclass:"",cclass:"",animationstep:0,rotateanimationstep:0,shadow:0,constructor:i,dimension:0,oThik:10,cX:0,cY:0,tblBG:null,dvCaption:null,dvTitle:null,ctx:null,canvas:null,getTitle:function(){return this.title},setTitle:function(i){this.title=i,t(this.dvTitle).text(this.title)},getCaption:function(){return this.caption},setCaption:function(i){this.caption=i,t(this.dvCaption).text(this.caption)},init:function(i){var s=this;t.extend(this,i),this.initWidget(),t.event.special.debouncedresize.threshold=250,t(window).bind("debouncedresize",function(){t(s.canvas).attr("width",1).attr("height",1),s.dimension=s.el.parent().width()>=s.el.parent().height()?s.el.parent().height():s.el.parent().width(),s.calcCenterXY(),t(s.canvas).attr("width",s.dimension).attr("height",s.dimension),s.drawBackCircle(),t(s.tblBG).remove(),s.drawTitle(),t(s.canvas).css({left:s.cX+"px"}),t(s.canvas).css({top:s.cY+"px"})})},initWidget:function(){var t=this;this.oThik=this.thik,t.dimension=this.el.parent().width()>=this.el.parent().height()?this.el.parent().height():this.el.parent().width(),this.calcCenterXY(),this.createCanvas(),this.drawBackCircle(),this.drawTitle()},calcCenterXY:function(){this.cX=(this.el.parent().width()-this.dimension)/2,this.cY=(this.el.parent().height()-this.dimension)/2,this.thik=this.oThik*this.dimension*.0031,console.log("parent.width:"+this.el.parent().width()+" , dimension:"+this.dimension+" , cX:"+this.cX)},createCanvas:function(){var i=this.dimension;this.canvas=t('<canvas style="position:relative;display:block;"></canvas>').attr({width:i,height:i}).appendTo(this.el)[0],t(this.canvas).css({left:this.cX+"px"}),t(this.canvas).css({top:this.cY+"px"}),this.ctx=this.canvas.getContext("2d")},drawBackCircle:function(){var t=Math.floor(this.dimension/2),i=Math.floor(this.dimension/2),s=Math.floor(this.dimension/2);s-=this.thik/1.5,this.ctx.clearRect(0,0,this.dimension,this.dimension),this.ctx.lineWidth=this.thik,0>=s&&(s=1),1==this.shadow&&(this.ctx.shadowBlur=2,this.ctx.shadowColor="rgba(0,0,0,0.2)",this.ctx.shadowOffsetY=1),this.ctx.fillStyle=this.bgcolor,this.ctx.arc(t,i,s,this.getRadian(0),this.getRadian(380),!1),this.ctx.fill()},drawTitle:function(){var i=.29*this.dimension,s=.054*this.dimension,n=.054*this.dimension,e=.11*this.dimension,a="-"+this.dimension.toString()+"px",o=t("<table></table>").appendTo(this.el)[0],h=t("<tr></tr>").appendTo(o).get(0),c=t("<td></td>").appendTo(h).get(0);this.dvTitle=t("<div></div>").appendTo(c).get(0);t('<img src="'+this.icon+'" style="width:'+i.toString()+'px;"/>').appendTo(c).get(0);this.dvCaption=t("<div></div>").appendTo(c).get(0),this.tblBG=o,t(o).css({width:this.dimension.toString()+"px"}).css({height:this.dimension.toString()+"px"}).css({"vertical-align":"middle"}).css({position:"relative"}).css({"margin-top":a}).css({font:"14px Tahoma, Helvetica, sans-serif"}).css({"font-weight":"normal"}).css({"text-align":"center"}).css({"border-spacing":"0"}).css({"border-collapse":"collapse"}),t(o).css({left:this.cX+"px"}),t(o).css({top:this.cY+"px"}),t(this.dvTitle).text(this.title),t(this.dvCaption).text(this.caption),""!=this.tid&&(t(this.dvTitle).attr({id:this.tid}),t(c).css({cursor:"pointer"})),""!=this.cid&&(t(this.dvCaption).attr({id:this.cid}),t(this.dvCaption).css({cursor:"pointer"})),""!=this.tclass?t(this.dvTitle).addClass(this.tclass):(t(this.dvTitle).css({"font-size":e.toString()+"px"}),t(this.dvTitle).css({"padding-bottom":n.toString()+"px"}),t(this.dvTitle).css({color:this.tfntcolor})),""!=this.cclass?t(this.dvCaption).addClass(this.cclass):(t(this.dvCaption).css({"font-size":e.toString()+"px"}),t(this.dvCaption).css({"padding-top":s.toString()+"px"}),t(this.dvCaption).css({color:this.cfntcolor}))},getRadian:function(t){return t-=90,t*Math.PI/180}},t.CircleProgressIcon={defaults:i.prototype},t.fn.CircleProgressIcon=function(s,n){var e="circle-progress",a=this.data(e);if("widget"==s){if(!a)throw Error('Calling "widget" method on not initialized instance is forbidden');return a.canvas}if("title"==s){if(!a)throw Error('Calling "title" method on not initialized instance is forbidden');if("undefined"==typeof n)return a.getTitle();var o=arguments[1];return this.each(function(){t(this).data(e).setTitle(o)})}if("caption"==s){if(!a)throw Error('Calling "caption" method on not initialized instance is forbidden');if("undefined"==typeof n)return a.getCaption();var o=arguments[1];return this.each(function(){t(this).data(e).setCaption(o)})}return this.each(function(){var n=t(this),a=n.data(e),o=t.isPlainObject(s)?s:{};if(a)a.init(o);else{var h=t.extend({},n.data());"string"==typeof h.fill&&(h.fill=JSON.parse(h.fill)),o=t.extend(h,o),o.el=n,a=new i(o),n.data(e,a)}})}}(jQuery);